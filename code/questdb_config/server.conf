# QuestDB Server Configuration for WIG80 Polish Stock Market Analysis
# Optimized for time series data processing and analytics

# ================================
# HTTP Server Configuration
# ================================
http.bind.to=0.0.0.0:8812
http.security.enabled=true

# Authentication for HTTP API
http.security.user=admin
http.security.password=quest

# CORS settings for web applications
http.cors.enabled=true
http.cors.allow.origin=*

# ================================
# Web Console Configuration
# ================================
web.console.enabled=true
web.console.bind.to=0.0.0.0:9009
web.console.security.enabled=true
web.console.security.user=admin
web.console.security.password=quest

# ================================
# PostgreSQL Wire Protocol
# ================================
pg.enabled=true
pg.bind.to=0.0.0.0:9000
pg.security.enabled=true
pg.security.user=admin
pg.security.password=quest

# PostgreSQL connection pool settings
pg.pool.capacity=10
pg.pool.max=100

# ================================
# Data Directory Configuration
# ================================
db.data.dir=/root/.questdb/db

# ================================
# Performance Configuration
# ================================

# Writer pool size (optimized for time series writes)
writer.pool.capacity=4

# Reader pool size (optimized for concurrent reads)
reader.pool.capacity=32

# ================================
# Snapshot Configuration
# ================================
snapshot.create.enabled=true
snapshot.create.interval=1h
snapshot.retention=24h

# ================================
# WAL (Write-Ahead Log) Configuration
# ================================
wal.enabled=true
wal.max.file.size=1024MiB
wal.flush.interval=5s
wal.apply.retention=7d

# ================================
# Partition Configuration
# ================================
# Optimize partitioning for daily stock data
partitions.autocreate.hour=2
partitions.autocreate.day=true

# ================================
# Monitoring and Logging
# ================================
metrics.enabled=true
metrics.bind.to=0.0.0.0:9002

# Log configuration
log.level=INFO
log.console.enabled=true
log.console.level=INFO
log.file.enabled=true
log.file.level=INFO
log.file.dir=/root/.questdb/log

# ================================
# Memory Configuration
# ================================
# Set appropriate heap size based on available memory
# For 8GB system, set -Xmx to 4GB
# For 16GB system, set -Xmx to 8GB
# This will be set via JVM options in docker-compose

# ================================
# Query Optimization
# ================================
# Enable SQL query cache for repeated queries
query.cache.enabled=true
query.cache.max.size=100

# ================================
# Time Zone Configuration
# ================================
# Set to Warsaw timezone for WIG80 data
cvs.date.fallback=ISO
cvs.time.zone=Warsaw
